# @param {Integer[]} nums
# @param {Integer} target
# @return {Integer}
def three_sum_closest(nums, target)
   nums.sort!
   ans = nums[0] + nums[1] + nums[2]
   ans_diff = (target - ans)
   first = 0
   for first in 0..nums.length-3 do
      left = first + 1
      right = nums.length - 1

      while left < right do
         sum = nums[first] + nums[left] + nums[right]
         diff = target - sum
         if( diff <= 0)
            right -= 1
         elsif diff > 0
            left += 1
         end
            
         if (diff.abs < ans_diff.abs)
            ans = sum
            ans_diff = diff
         end
      end
   end
   return ans

      # for second in first+1..nums.length-1 do
      #    sum_two = nums[first] + nums[second]
      #    l = second + 1
      #    r = nums.length - 1
      #    while l <= r do
      #       mid = l + (r - l) / 2
      #       sum = sum_two + nums[mid]
      #       diff = target - sum
      #       #puts "#{first}, #{second}, #{mid}, l : #{l}, r: #{r}, sum : #{sum}, diff: #{diff}"
      #       if(diff < 0)
      #          r = mid -1
      #       elsif diff > 0
      #          l = mid + 1
      #       else
      #          ans = target
      #          ans_diff = diff
      #          break
      #       end
      #       if (diff.abs < ans_diff.abs)
      #          ans = sum
      #          ans_diff = diff
      #       end
      #    end
      # end
end


nums = [-1,2,1,-4]
nums = [1,1,1,0]
nums = [0,3,97,102,200]
nums = [-13,592,-501,770,-952,-675,322,-829,-246,657,608,485,-112,967,-30,182,-969,559,-286,-64,24,365,-158,701,535,-429,-217,28,948,-114,-536,-711,693,23,-958,-283,-700,-672,311,314,-712,-594,-351,658,747,949,70,888,166,495,244,-380,-654,454,-281,-811,-168,-839,-106,877,-216,523,-234,-8,289,-175,920,-237,-791,-976,-509,-4,-3,298,-190,194,-328,265,150,210,285,-176,-646,-465,-97,-107,668,892,612,-54,-272,-910,557,-212,-930,-198,38,-365,-729,-410,932,4,-565,-329,-456,224,443,-529,-428,-294,191,229,112,-867,-163,-979,236,-227,-388,-209,984,188,-549,970,951,-119,-146,801,-554,564,-769,334,-819,-356,-724,-219,527,-405,-27,-759,722,-774,758,394,146,517,870,-208,742,-782,336,-364,-558,-417,663,-914,536,293,-818,847,-322,408,876,-823,827,167]
nums = [-31,684,-416,948,231,-602,696,-12,219,176,207,-455,-50,827,659,292,-182,-879,-939,881,919,-908,346,825,-957,-793,527,-156,-582,148,-176,398,-22,-508,-5,2,517,133,939,-526,-621,-129,963,321,-105,-559,-405,871,465,-248,-123,979,758,432,309,498,387,627,538,-357,701,-110,717,-846,-112,58,210,-799,-520,-681,-852,-732,543,829,-492,-755,-820,-994,775,575,-752,-631,-771,-400,107,45,-545,10,8,497,901,-725,-164,850,713,832,227,-487,79,-798,-614,600,-974,930,56,643,709,221,-854,-633,-578,518,501,-71,-650,-429,-891,261,168,-404,-421,-863,268,-457,-87,251,888,115,-132,-512,903,-484,624,22,-440,-629,404,-594,-306,-388,67,-515,394,814,-219,687,236,539,330,-848,-307,-55,-469,-535,-734,357,-56,-649,-585,-75,-403,-32,706,-65,-268,62,831,-956,-27,-69,-651,-72,642,-680,617,-903,-475,-89,-197,279,-444,712,244,54,874,-291,-805,-824,-676,114,933,283,197,733,594,-710,-143,522,724,-423,688,914,-729,-661,651,345,-181,658,-684,-281,-698,910,-30,277,-99,605,836,-894,-109,-781,-947,-49,602,848,-784,469,156,-900,-632,572,204,-294,11,-200,-385,817,294,-210,141,95,-965,-369,794,637,-735,-347,510,762,-377,513,-504,-165,-477,-178,32,55,-948,-595,-64,-170,-576,776,-901,-518,-537,-215,-351,-458,834,-15,-376,-381,-160,142,408,-275,-987,533,-498,-1000,72,-810,-689,639,-816,791,920,-344,215,-934,-880,-935,655,-577,-616,-823,212,714,-499,489,567,647,324,468,-797,-61,646,-572,-392,482,-240,450,154,681,-301,-839,-607,-895,-245,-704,-929,60,895,116,-638,-90,562,75,665,945,768,678,137,-636,436,-282,17,657,882,740,-94,-536,-748,-870,-261,461,335,223,-137,139,420,356,102,-809,-172,803,-39,-862,399,666,540,-187,-151,579,694,82,386,570,-583,-113,636,-973,635,830,996,-843,746,-482,929,840,-471,363,14,936,34,-926,-25,276,103,206,-163,679,-731,-470,789,203,-700,-340,-643,490,-476,245,-510,-452,160,-806,629,-221,118,-365,-243,287,926,-467,-428,977,-909,788,-804,634,-652,-570,609,26,-587,-322,-737,935,-717,456,-615,991,135,-410,-157,660,778,641,971,-822,-104,-493,-238,350,-726,-768,-540,-773,670,550,406,-889,-703,879,-765,-318,847,7,-141,-610,950,-750,44,119,189,341,-292,-620,462,438,153,921,-82,723,-514,-288,-252,-530,-641,339,-795,-675,-702,-865,246,94,-549,205,-154,-529,620,-468,21,854,-485,-233,-657,-300,-173,-162]
nums = [4,0,5,-5,3,3,0,-4,-5]
target = -2
# 13, 120, 123, l : 121, r: 125, sum : 2921
# 13, 45, 120, l : 76, r: 165, sum : 2900
# target = 300
# target = 7175
# target = -4546
puts three_sum_closest(nums, target)